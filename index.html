<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Game Canvas</title>
</head>
<body style="background-color: #FEFEFE;">
  <center>
    <canvas id="game" style="background-color: #FEFEFE">Canvas not work!</canvas>
  </center>
  <script>
    var game = document.getElementById("game"); 
    var wall = game.getContext("2d");
        
    var posX, posY;
    
    var map = [
      [1,1,1,1,1,1,1,1,1,1],
      [1,3,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,5,2,1],
      [1,2,2,2,5,2,2,1,1,1],
      [1,2,2,2,2,2,2,1,1,1],
      [1,2,2,2,2,2,2,1,1,1],
      [1,2,2,2,2,1,1,1,1,1],
      [1,1,1,1,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,4,1]
    ];
    
    game.width = 320;//10
    game.height = 320;//10
    
    function drawBlockAll(x,y) {
      wall.fillStyle = "#5CD3EE";//блок напрвления
      wall.fillRect(x, y, 32, 32); 
      
      wall.fillStyle = "#85ABC6";//линии направления
      wall.fillRect(x, y, 32, 32/6);//вверх 
      wall.fillRect(x, y, 32/6, 32);//лево
      wall.fillRect(x+32-(32/6), y, 32/6, 32);//право
      wall.fillRect(x, y+32-(32/6), 32, 32/6);//низ
    }
    //wall.fillStyle = "#85ABC6";
    
    //wall.fillRect(i*32, j*32 , 32, 32);    
    
    function drawGame() {
    for(var y = 0; y < 10; y++) {
      for(var x = 0; x < 10; x++) {
        if(map[y][x] == 1) {
          wall.fillStyle = "#85ABC6";//синий
          wall.fillRect(x*32, y*32 , 32, 32);      
        } else if(map[y][x] == 2) {
          wall.fillStyle = "#FEFEFE";//белий
          wall.fillRect(x*32, y*32 , 32, 32);  
        } else if(map[y][x] == 3) {
          posX = x;
          posY = y;
          wall.fillStyle = "#63E2AF";//зелений
          wall.fillRect(x*32, y*32 , 32, 32);      
        } else if(map[y][x] == 4) {
          wall.fillStyle = "#81E7BE";//зелений финиш
          wall.fillRect(x*32, y*32 , 32, 32);      
        } else if(map[y][x] == 5) {
          drawBlockAll(x*32, y*32); 
        }
      }
    }
    }

    drawGame();
    
    function checkButton(event) {
      if(event.keyCode == 87 || event.keyCode == 38) {// w
        //alert("up");  
        if(map[posY-1][posX] == 2) {
          //alert("yes");
          
          wall.fillStyle = "#FEFEFE";//белий
          wall.fillRect(posX*32, posY*32 , 32, 32); 
          
          wall.fillStyle = "#63E2AF";//зелений
          wall.fillRect((posX)*32, (posY-1)*32 , 32, 32);
          
          map[posY][posX] = 2;
          map[posY-1][posX] = 3;
          posY = posY-1;
          
        } else if(map[posY-1][posX] == 4) {
          alert("You win!");  
        } else if(map[posY-1][posX] == 5) {
          
          if(map[posY-2][posX] != 1) {
            wall.fillStyle = "#FEFEFE";//белий
            wall.fillRect(posX*32, posY*32 , 32, 32); 

            wall.fillStyle = "#63E2AF";//зелений
            wall.fillRect((posX)*32, (posY-1)*32 , 32, 32);
          
            drawBlockAll((posX)*32, (posY-2)*32);
            map[posY-2][posX] = 5;

            map[posY][posX] = 2;
            map[posY-1][posX] = 3;
            posY = posY-1; 
          }
        }
      } else if(event.keyCode == 83 || event.keyCode == 40) {//s
        //alert("down");
        if(map[posY+1][posX] == 2) {
          //alert("yes");
          
          wall.fillStyle = "#FEFEFE";//белий
          wall.fillRect(posX*32, posY*32 , 32, 32); 
          
          wall.fillStyle = "#63E2AF";//зелений
          wall.fillRect((posX)*32, (posY+1)*32 , 32, 32);
          
          map[posY][posX] = 2;
          map[posY+1][posX] = 3;
          posY = posY+1;
          
        } else if(map[posY+1][posX] == 4) {
          alert("You win!");  
        } else if(map[posY+1][posX] == 5) {
          
          if(map[posY+2][posX] != 1) {
            wall.fillStyle = "#FEFEFE";//белий
            wall.fillRect(posX*32, posY*32 , 32, 32); 

            wall.fillStyle = "#63E2AF";//зелений
            wall.fillRect((posX)*32, (posY+1)*32 , 32, 32);
          
            drawBlockAll((posX)*32, (posY+2)*32);
            map[posY+2][posX] = 5;

            map[posY][posX] = 2;
            map[posY+1][posX] = 3;
            posY = posY+1; 
          }
        } 
      } else if(event.keyCode == 68 || event.keyCode == 39) {//d
        //alert("right");
        if(map[posY][posX+1] == 2) {
          //alert("yes");
          
          wall.fillStyle = "#FEFEFE";//белий
          wall.fillRect(posX*32, posY*32 , 32, 32); 
          
          wall.fillStyle = "#63E2AF";//зелений
          wall.fillRect((posX+1)*32, posY*32 , 32, 32);
          
          map[posY][posX] = 2;
          map[posY][posX+1] = 3;
          posX = posX+1;
          
        } else if(map[posY][posX+1] == 4) {
          alert("You win!");  
        } else if(map[posY][posX+1] == 5) {
          
          if(map[posY][posX+2] != 1) {
            wall.fillStyle = "#FEFEFE";//белий
            wall.fillRect(posX*32, posY*32 , 32, 32); 

            wall.fillStyle = "#63E2AF";//зелений
            wall.fillRect((posX+1)*32, posY*32 , 32, 32);
          
            drawBlockAll((posX+2)*32, posY*32);
            map[posY][posX+2] = 5;

            map[posY][posX] = 2;
            map[posY][posX+1] = 3;
            posX = posX+1;  
          }
        }
      } else if(event.keyCode == 65 || event.keyCode == 37) {//a
        //alert("left");
        if(map[posY][posX-1] == 2) {
          //alert("yes");
          
          wall.fillStyle = "#FEFEFE";//белий
          wall.fillRect(posX*32, posY*32 , 32, 32); 
          
          wall.fillStyle = "#63E2AF";//зелений
          wall.fillRect((posX-1)*32, posY*32 , 32, 32);
          
          map[posY][posX] = 2;
          map[posY][posX-1] = 3;
          posX = posX-1;
          
        } else if(map[posY][posX-1] == 4) {
          alert("You win!");  
        } else if(map[posY][posX-1] == 5) {
          
          if(map[posY][posX-2] != 1) {
            wall.fillStyle = "#FEFEFE";//белий
            wall.fillRect(posX*32, posY*32 , 32, 32); 

            wall.fillStyle = "#63E2AF";//зелений
            wall.fillRect((posX-1)*32, posY*32 , 32, 32);
          
            drawBlockAll((posX-2)*32, posY*32);
            map[posY][posX-2] = 5;

            map[posY][posX] = 2;
            map[posY][posX-1] = 3;
            posX = posX-1;  
          }
        }
      }
    }
    
    addEventListener("keydown", checkButton);  
  </script>
</body>
</html>